#coding=utf-8
import json,urllib2

cityLibrary = {u'北京':101010100,u'朝阳':101010300,u'顺义':101010400,u'怀柔':101010500,u'通州':101010600,u'昌平':101010700,u'延庆':101010800,u'丰台':101010900,u'石景山':101011000,u'大兴':101011100,u'房山':101011200,u'密云':101011300,u'门头沟':101011400,u'平谷':101011500,u'八达岭':101011600,u'佛爷顶':101011700,u'汤河口':101011800,u'密云上甸子':101011900,u'斋堂':101012000,u'霞云岭':101012100,u'北京城区':101012200,u'海淀':101010200,u'天津':101030100,u'宝坻':101030300,u'东丽':101030400,u'西青':101030500,u'北辰':101030600,u'蓟县':101031400,u'汉沽':101030800,u'静海':101030900,u'津南':101031000,u'塘沽':101031100,u'大港':101031200,u'武清':101030200,u'宁河':101030700,u'上海':101020100,u'宝山':101020300,u'嘉定':101020500,u'南汇':101020600,u'浦东':101021300,u'青浦':101020800,u'松江':101020900,u'奉贤':101021000,u'崇明':101021100,u'徐家汇':101021200,u'闵行':101020200,u'金山':101020700,u'石家庄':101090101,u'张家口':101090301,u'承德':101090402,u'唐山':101090501,u'秦皇岛':101091101,u'沧州':101090701,u'衡水':101090801,u'邢台':101090901,u'邯郸':101091001,u'保定':101090201,u'廊坊':101090601,u'郑州':101180101,u'新乡':101180301,u'许昌':101180401,u'平顶山':101180501,u'信阳':101180601,u'南阳':101180701,u'开封':101180801,u'洛阳':101180901,u'商丘':101181001,u'焦作':101181101,u'鹤壁':101181201,u'濮阳':101181301,u'周口':101181401,u'漯河':101181501,u'驻马店':101181601,u'三门峡':101181701,u'济源':101181801,u'安阳':101180201,u'合肥':101220101,u'芜湖':101220301,u'淮南':101220401,u'马鞍山':101220501,u'安庆':101220601,u'宿州':101220701,u'阜阳':101220801,u'亳州':101220901,u'黄山':101221001,u'滁州':101221101,u'淮北':101221201,u'铜陵':101221301,u'宣城':101221401,u'六安':101221501,u'巢湖':101221601,u'池州':101221701,u'蚌埠':101220201,u'杭州':101210101,u'舟山':101211101,u'湖州':101210201,u'嘉兴':101210301,u'金华':101210901,u'绍兴':101210501,u'台州':101210601,u'温州':101210701,u'丽水':101210801,u'衢州':101211001,u'宁波':101210401,u'重庆':101040100,u'合川':101040300,u'南川':101040400,u'江津':101040500,u'万盛':101040600,u'渝北':101040700,u'北碚':101040800,u'巴南':101040900,u'长寿':101041000,u'黔江':101041100,u'万州天城':101041200,u'万州龙宝':101041300,u'涪陵':101041400,u'开县':101041500,u'城口':101041600,u'云阳':101041700,u'巫溪':101041800,u'奉节':101041900,u'巫山':101042000,u'潼南':101042100,u'垫江':101042200,u'梁平':101042300,u'忠县':101042400,u'石柱':101042500,u'大足':101042600,u'荣昌':101042700,u'铜梁':101042800,u'璧山':101042900,u'丰都':101043000,u'武隆':101043100,u'彭水':101043200,u'綦江':101043300,u'酉阳':101043400,u'秀山':101043600,u'沙坪坝':101043700,u'永川':101040200,u'福州':101230101,u'泉州':101230501,u'漳州':101230601,u'龙岩':101230701,u'晋江':101230509,u'南平':101230901,u'厦门':101230201,u'宁德':101230301,u'莆田':101230401,u'三明':101230801,u'兰州':101160101,u'平凉':101160301,u'庆阳':101160401,u'武威':101160501,u'金昌':101160601,u'嘉峪关':101161401,u'酒泉':101160801,u'天水':101160901,u'武都':101161001,u'临夏':101161101,u'合作':101161201,u'白银':101161301,u'定西':101160201,u'张掖':101160701,u'广州':101280101,u'惠州':101280301,u'梅州':101280401,u'汕头':101280501,u'深圳':101280601,u'珠海':101280701,u'佛山':101280800,u'肇庆':101280901,u'湛江':101281001,u'江门':101281101,u'河源':101281201,u'清远':101281301,u'云浮':101281401,u'潮州':101281501,u'东莞':101281601,u'中山':101281701,u'阳江':101281801,u'揭阳':101281901,u'茂名':101282001,u'汕尾':101282101,u'韶关':101280201,u'南宁':101300101,u'柳州':101300301,u'来宾':101300401,u'桂林':101300501,u'梧州':101300601,u'防城港':101301401,u'贵港':101300801,u'玉林':101300901,u'百色':101301001,u'钦州':101301101,u'河池':101301201,u'北海':101301301,u'崇左':101300201,u'贺州':101300701,u'贵阳':101260101,u'安顺':101260301,u'都匀':101260401,u'兴义':101260906,u'铜仁':101260601,u'毕节':101260701,u'六盘水':101260801,u'遵义':101260201,u'凯里':101260501,u'昆明':101290101,u'红河':101290301,u'文山':101290601,u'玉溪':101290701,u'楚雄':101290801,u'普洱':101290901,u'昭通':101291001,u'临沧':101291101,u'怒江':101291201,u'香格里拉':101291301,u'丽江':101291401,u'德宏':101291501,u'景洪':101291601,u'大理':101290201,u'曲靖':101290401,u'保山':101290501,u'呼和浩特':101080101,u'乌海':101080301,u'集宁':101080401,u'通辽':101080501,u'阿拉善左旗':101081201,u'鄂尔多斯':101080701,u'临河':101080801,u'锡林浩特':101080901,u'呼伦贝尔':101081000,u'乌兰浩特':101081101,u'包头':101080201,u'赤峰':101080601,u'南昌':101240101,u'上饶':101240301,u'抚州':101240401,u'宜春':101240501,u'鹰潭':101241101,u'赣州':101240701,u'景德镇':101240801,u'萍乡':101240901,u'新余':101241001,u'九江':101240201,u'吉安':101240601,u'武汉':101200101,u'黄冈':101200501,u'荆州':101200801,u'宜昌':101200901,u'恩施':101201001,u'十堰':101201101,u'神农架':101201201,u'随州':101201301,u'荆门':101201401,u'天门':101201501,u'仙桃':101201601,u'潜江':101201701,u'襄樊':101200201,u'鄂州':101200301,u'孝感':101200401,u'黄石':101200601,u'咸宁':101200701,u'成都':101270101,u'自贡':101270301,u'绵阳':101270401,u'南充':101270501,u'达州':101270601,u'遂宁':101270701,u'广安':101270801,u'巴中':101270901,u'泸州':101271001,u'宜宾':101271101,u'内江':101271201,u'资阳':101271301,u'乐山':101271401,u'眉山':101271501,u'凉山':101271601,u'雅安':101271701,u'甘孜':101271801,u'阿坝':101271901,u'德阳':101272001,u'广元':101272101,u'攀枝花':101270201,u'银川':101170101,u'中卫':101170501,u'固原':101170401,u'石嘴山':101170201,u'吴忠':101170301,u'西宁':101150101,u'黄南':101150301,u'海北':101150801,u'果洛':101150501,u'玉树':101150601,u'海西':101150701,u'海东':101150201,u'海南':101150401,u'济南':101120101,u'潍坊':101120601,u'临沂':101120901,u'菏泽':101121001,u'滨州':101121101,u'东营':101121201,u'威海':101121301,u'枣庄':101121401,u'日照':101121501,u'莱芜':101121601,u'聊城':101121701,u'青岛':101120201,u'淄博':101120301,u'德州':101120401,u'烟台':101120501,u'济宁':101120701,u'泰安':101120801,u'西安':101110101,u'延安':101110300,u'榆林':101110401,u'铜川':101111001,u'商洛':101110601,u'安康':101110701,u'汉中':101110801,u'宝鸡':101110901,u'咸阳':101110200,u'渭南':101110501,u'太原':101100101,u'临汾':101100701,u'运城':101100801,u'朔州':101100901,u'忻州':101101001,u'长治':101100501,u'大同':101100201,u'阳泉':101100301,u'晋中':101100401,u'晋城':101100601,u'吕梁':101101100,u'乌鲁木齐':101130101,u'石河子':101130301,u'昌吉':101130401,u'吐鲁番':101130501,u'库尔勒':101130601,u'阿拉尔':101130701,u'阿克苏':101130801,u'喀什':101130901,u'伊宁':101131001,u'塔城':101131101,u'哈密':101131201,u'和田':101131301,u'阿勒泰':101131401,u'阿图什':101131501,u'博乐':101131601,u'克拉玛依':101130201,u'拉萨':101140101,u'山南':101140301,u'阿里':101140701,u'昌都':101140501,u'那曲':101140601,u'日喀则':101140201,u'林芝':101140401,u'台北县':101340101,u'高雄':101340201,u'台中':101340401,u'海口':101310101,u'三亚':101310201,u'东方':101310202,u'临高':101310203,u'澄迈':101310204,u'儋州':101310205,u'昌江':101310206,u'白沙':101310207,u'琼中':101310208,u'定安':101310209,u'屯昌':101310210,u'琼海':101310211,u'文昌':101310212,u'保亭':101310214,u'万宁':101310215,u'陵水':101310216,u'西沙':101310217,u'南沙岛':101310220,u'乐东':101310221,u'五指山':101310222,u'琼山':101310102,u'长沙':101250101,u'株洲':101250301,u'衡阳':101250401,u'郴州':101250501,u'常德':101250601,u'益阳':101250700,u'娄底':101250801,u'邵阳':101250901,u'岳阳':101251001,u'张家界':101251101,u'怀化':101251201,u'黔阳':101251301,u'永州':101251401,u'吉首':101251501,u'湘潭':101250201,u'南京':101190101,u'镇江':101190301,u'苏州':101190401,u'南通':101190501,u'扬州':101190601,u'宿迁':101191301,u'徐州':101190801,u'淮安':101190901,u'连云港':101191001,u'常州':101191101,u'泰州':101191201,u'无锡':101190201,u'盐城':101190701,u'哈尔滨':101050101,u'牡丹江':101050301,u'佳木斯':101050401,u'绥化':101050501,u'黑河':101050601,u'双鸭山':101051301,u'伊春':101050801,u'大庆':101050901,u'七台河':101051002,u'鸡西':101051101,u'鹤岗':101051201,u'齐齐哈尔':101050201,u'大兴安岭':101050701,u'长春':101060101,u'延吉':101060301,u'四平':101060401,u'白山':101060901,u'白城':101060601,u'辽源':101060701,u'松原':101060801,u'吉林':101060201,u'通化':101060501,u'沈阳':101070101,u'鞍山':101070301,u'抚顺':101070401,u'本溪':101070501,u'丹东':101070601,u'葫芦岛':101071401,u'营口':101070801,u'阜新':101070901,u'辽阳':101071001,u'铁岭':101071101,u'朝阳':101071201,u'盘锦':101071301,u'大连':101070201,u'锦州':101070701}
def findWeather(city):
    citycode=cityLibrary[city]
    print citycode
    url = "http://www.weather.com.cn/data/cityinfo/%d.html"%(citycode)
    content = urllib2.urlopen(url).read()
    data = json.loads(content)
    tq = data['weatherinfo']
    tempMin = tq[u'temp1'].encode('utf-8')
    weather = tq[u'weather'].encode('utf-8')
    url = "http://www.weather.com.cn/data/sk/%d.html"%(citycode)
    content = urllib2.urlopen(url).read()
    data = json.loads(content)
    tq = data['weatherinfo']
    city = tq[u'city'].encode('utf-8')
    wd = tq[u'WD'].encode('utf-8')
    ws = tq[u'WS'].encode('utf-8')
    sd = tq[u'SD'].encode('utf-8')
    s = "城市：%s \n气温：%s~%s℃ \n天气:%s\n风向：%s\n风力:%s\n湿度:%s\n" % (city, tempMin, tempMax, weather, wd, ws, sd)
    ans=s.encode('utf-8')
    return ans

